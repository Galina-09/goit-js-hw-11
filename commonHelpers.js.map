{"version":3,"file":"commonHelpers.js","sources":["../src/config.js","../src/main.js"],"sourcesContent":["export const BASE_URL = 'https://pixabay.com/api';\nexport const API_KEY = '41864490-ab1aa9c4772cfd6b871252eca';\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { API_KEY, BASE_URL } from './config';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  loader: document.querySelector('.loader'),\n  imageList: document.querySelector('.gallery'),\n};\n\nconst gallery = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nrefs.searchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const query = form.elements.query.value;\n\n  refs.imageList.innerHTML = '';\n\n  fetchImage(query)\n    .then(renderImage)\n    .catch(handleError)\n    .finally(() => {\n      hideLoader();\n      form.reset();\n    });\n}\n\nfunction fetchImage(\n  qWorld,\n  image_type = 'photo',\n  orientation = 'horizontal',\n  safesearch = true\n) {\n  return fetch(\n    `${BASE_URL}/?key=${API_KEY}&q=${qWorld}&image_type=${image_type}&orientation=${orientation}&safesearch=${safesearch}&per_page=18`\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.status);\n    }\n\n    return resp.json(); //повертає масив обєктів\n  });\n}\n\nfunction renderImage({ hits }) {\n  if (hits.length === 0) {\n    showMessage(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    return;\n  }\n\n  refs.imageList.innerHTML = createMarkup(hits);\n\n  gallery.refresh();\n}\n\nfunction showMessage(customMessage = '') {\n  const errorMessage =\n    customMessage || 'Sorry, there was an error fetching images.';\n  iziToast.show({\n    iconUrl: './img/error.svg',\n    theme: 'dark',\n    message: errorMessage,\n    messageSize: '16px',\n    messageColor: 'white',\n    backgroundColor: '#EF4040',\n    position: 'topRight',\n    timeout: 5000,\n  });\n}\n\nfunction handleError(err) {\n  /*console.error(err);*/\n  refs.imageList.innerHTML = '';\n  showMessage('Sorry, there is a problem with connection with the server.');\n}\n\nfunction createMarkup(hits) {\n  return hits\n    .map(\n      ({\n        comments,\n        downloads,\n        largeImageURL,\n        likes,\n        webformatURL,\n        tags,\n        views,\n      }) =>\n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n          <ul class=\"gallery-item-description\">\n            <li>Likes: ${likes}</li>\n            <li>Views: ${views}</li>\n            <li>Downloads: ${downloads}</li>\n            <li>Comments: ${comments}</li>\n          </ul>\n        </a>\n      </li>`\n    )\n    .join('');\n}\n\nfunction hideLoader() {\n  // Приховати елемент завантажувача\n  setTimeout(() => {\n    refs.loader.style.display = 'none';\n  }, 500);\n}\n\nfunction showLoader() {\n  // Показати елемент завантажувача\n  if (refs.loader.style.display !== 'block') {\n    refs.loader.style.display = 'block';\n  }\n}\n"],"names":["BASE_URL","API_KEY","refs","gallery","SimpleLightbox","handleSearch","event","form","query","fetchImage","renderImage","handleError","hideLoader","qWorld","image_type","orientation","safesearch","resp","hits","showMessage","createMarkup","customMessage","errorMessage","iziToast","err","comments","downloads","largeImageURL","likes","webformatURL","tags","views"],"mappings":"6vBAAO,MAAMA,EAAW,0BACXC,EAAU,qCCKjBC,EAAO,CACX,WAAY,SAAS,cAAc,cAAc,EACjD,OAAQ,SAAS,cAAc,SAAS,EACxC,UAAW,SAAS,cAAc,UAAU,CAC9C,EAEMC,EAAU,IAAIC,EAAe,kBAAmB,CACpD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDF,EAAK,WAAW,iBAAiB,SAAUG,CAAY,EAEvD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAOD,EAAM,cACbE,EAAQD,EAAK,SAAS,MAAM,MAElCL,EAAK,UAAU,UAAY,GAE3BO,EAAWD,CAAK,EACb,KAAKE,CAAW,EAChB,MAAMC,CAAW,EACjB,QAAQ,IAAM,CACbC,IACAL,EAAK,MAAK,CAChB,CAAK,CACL,CAEA,SAASE,EACPI,EACAC,EAAa,QACbC,EAAc,aACdC,EAAa,GACb,CACA,OAAO,MACL,GAAGhB,UAAiBC,OAAaY,gBAAqBC,iBAA0BC,gBAA0BC,eAC9G,EAAI,KAAKC,GAAQ,CACb,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,MAAM,EAG7B,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASP,EAAY,CAAE,KAAAQ,GAAQ,CAC7B,GAAIA,EAAK,SAAW,EAAG,CACrBC,EACE,0EACN,EACI,MACD,CAEDjB,EAAK,UAAU,UAAYkB,EAAaF,CAAI,EAE5Cf,EAAQ,QAAO,CACjB,CAEA,SAASgB,EAAYE,EAAgB,GAAI,CACvC,MAAMC,EACJD,GAAiB,6CACnBE,EAAS,KAAK,CACZ,QAAS,kBACT,MAAO,OACP,QAASD,EACT,YAAa,OACb,aAAc,QACd,gBAAiB,UACjB,SAAU,WACV,QAAS,GACb,CAAG,CACH,CAEA,SAASX,EAAYa,EAAK,CAExBtB,EAAK,UAAU,UAAY,GAC3BiB,EAAY,4DAA4D,CAC1E,CAEA,SAASC,EAAaF,EAAM,CAC1B,OAAOA,EACJ,IACC,CAAC,CACC,SAAAO,EACA,UAAAC,EACA,cAAAC,EACA,MAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,CACD,IACC;AAAA,wCACgCJ;AAAA,4CACIE,WAAsBC;AAAA;AAAA,yBAEzCF;AAAA,yBACAG;AAAA,6BACIL;AAAA,4BACDD;AAAA;AAAA;AAAA,YAIvB,EACA,KAAK,EAAE,CACZ,CAEA,SAASb,GAAa,CAEpB,WAAW,IAAM,CACfV,EAAK,OAAO,MAAM,QAAU,MAC7B,EAAE,GAAG,CACR"}