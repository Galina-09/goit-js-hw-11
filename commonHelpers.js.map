{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '41864490-ab1aa9c4772cfd6b871252eca';\n\nfunction fetchImage(\n  qWorld,\n  image_type = 'photo',\n  orientation = 'horizontal',\n  safesearch = true\n) {\n  return fetch(\n    `${BASE_URL}/?key=${API_KEY}&q=${qWorld}&image_type=${image_type}&orientation=${orientation}&safesearch=${safesearch}&per_page=18`\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json(); //повертає масив обєктів\n  });\n}\n\nlet gallery;\nconst loader = document.querySelector('.loader');\n\nconst refs = {\n  gallery: document.querySelector('.gallery'),\n  searchForm: document.querySelector('.search-form'),\n};\n\nrefs.searchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const query = form.elements.query.value;\n  refs.gallery.innerHTML = '';\n\n  //console.log(query);\n  showLoader();\n\n  fetchImage(query)\n    .then(renderImage)\n    .catch(onFetchError)\n    .finally(() => {\n      hideLoader();\n      form.reset();\n    });\n}\n\nfunction renderImage({ hits }) {\n  if (hits.length === 0) {\n    showMessage();\n    return;\n  }\n\n  const markup = hits\n    .map(\n      ({\n        comments,\n        downloads,\n        largeImageURL,\n        likes,\n        webformatURL,\n        tags,\n        views,\n      }) =>\n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\" target=\"_blank\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n          <ul class=\"gallery-item-description\">\n            <li>Likes: ${likes}</li>\n            <li>Views: ${views}</li>\n            <li>Downloads: ${downloads}</li>\n            <li>Comments: ${comments}</li>\n          </ul>\n        </a>\n      </li>`\n    )\n    .join('');\n\n  refs.gallery.innerHTML = markup;\n\n  gallery = new SimpleLightbox('.gallery-item a', {\n    // Створення нового об'єкту SimpleLightbox , коли оновлюється галерея\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  gallery.refresh(); // Виклик метод refresh() після оновлення контенту\n}\n\nfunction onFetchError(error) {\n  alert('Упс, щось пішло не так і ми не знайшли вашого покемона!');\n  console.error(error);\n}\n\nfunction showMessage() {\n  iziToast.show({\n    class: 'error-svg',\n    icon: 'error-svg',\n    theme: 'dark',\n    message:\n      'Sorry, there are no images matching your search query. Please try again! Please choose a date in the future',\n    messageSize: '16px',\n    messageColor: 'white',\n    backgroundColor: '#EF4040',\n    position: 'topRight',\n    timeout: 5000,\n  });\n}\n\n// Додаємо обробник події для поле вводу\nconst searchInput = refs.searchForm.querySelector('.form-control');\nsearchInput.addEventListener('focus', () => {\n  // Очищаємо вміст галереї, коли курсор фокусується на полі вводу\n  refs.gallery.innerHTML = '';\n});\n\nfunction showLoader() {\n  // Показати елемент завантажувача\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  // Приховати елемент завантажувача\n  loader.style.display = 'none';\n}\n"],"names":["BASE_URL","API_KEY","fetchImage","qWorld","image_type","orientation","safesearch","resp","gallery","loader","refs","handleSearch","event","form","query","showLoader","renderImage","onFetchError","hideLoader","hits","showMessage","markup","comments","downloads","largeImageURL","likes","webformatURL","tags","views","SimpleLightbox","error","iziToast","searchInput"],"mappings":"6vBAKA,MAAMA,EAAW,0BACXC,EAAU,qCAEhB,SAASC,EACPC,EACAC,EAAa,QACbC,EAAc,aACdC,EAAa,GACb,CACA,OAAO,MACL,GAAGN,UAAiBC,OAAaE,gBAAqBC,iBAA0BC,gBAA0BC,eAC9G,EAAI,KAAKC,GAAQ,CACb,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAGjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,IAAIC,EACJ,MAAMC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAO,CACX,QAAS,SAAS,cAAc,UAAU,EAC1C,WAAY,SAAS,cAAc,cAAc,CACnD,EAEAA,EAAK,WAAW,iBAAiB,SAAUC,CAAY,EAEvD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAOD,EAAM,cACbE,EAAQD,EAAK,SAAS,MAAM,MAClCH,EAAK,QAAQ,UAAY,GAGzBK,IAEAb,EAAWY,CAAK,EACb,KAAKE,CAAW,EAChB,MAAMC,CAAY,EAClB,QAAQ,IAAM,CACbC,IACAL,EAAK,MAAK,CAChB,CAAK,CACL,CAEA,SAASG,EAAY,CAAE,KAAAG,GAAQ,CAC7B,GAAIA,EAAK,SAAW,EAAG,CACrBC,IACA,MACD,CAED,MAAMC,EAASF,EACZ,IACC,CAAC,CACC,SAAAG,EACA,UAAAC,EACA,cAAAC,EACA,MAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,CACD,IACC;AAAA,wCACgCJ;AAAA,4CACIE,WAAsBC;AAAA;AAAA,yBAEzCF;AAAA,yBACAG;AAAA,6BACIL;AAAA,4BACDD;AAAA;AAAA;AAAA,YAIvB,EACA,KAAK,EAAE,EAEVZ,EAAK,QAAQ,UAAYW,EAEzBb,EAAU,IAAIqB,EAAe,kBAAmB,CAE9C,aAAc,MACd,aAAc,GAClB,CAAG,EAEDrB,EAAQ,QAAO,CACjB,CAEA,SAASS,EAAaa,EAAO,CAC3B,MAAM,yDAAyD,EAC/D,QAAQ,MAAMA,CAAK,CACrB,CAEA,SAASV,GAAc,CACrBW,EAAS,KAAK,CACZ,MAAO,YACP,KAAM,YACN,MAAO,OACP,QACE,8GACF,YAAa,OACb,aAAc,QACd,gBAAiB,UACjB,SAAU,WACV,QAAS,GACb,CAAG,CACH,CAGA,MAAMC,EAActB,EAAK,WAAW,cAAc,eAAe,EACjEsB,EAAY,iBAAiB,QAAS,IAAM,CAE1CtB,EAAK,QAAQ,UAAY,EAC3B,CAAC,EAED,SAASK,GAAa,CAEpBN,EAAO,MAAM,QAAU,OACzB,CAEA,SAASS,GAAa,CAEpBT,EAAO,MAAM,QAAU,MACzB"}