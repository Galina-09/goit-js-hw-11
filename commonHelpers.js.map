{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '41864490-ab1aa9c4772cfd6b871252eca';\n\nfunction fetchImage(\n  qWorld,\n  image_type = 'photo',\n  orientation = 'horizontal',\n  safesearch = true\n) {\n  return fetch(\n    `${BASE_URL}/?key=${API_KEY}&q=${qWorld}&image_type=${image_type}&orientation=${orientation}&safesearch=${safesearch}&per_page=18`\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json(); //повертає масив обєктів\n  });\n}\n\nlet gallery;\n\nconst refs = {\n  loader: document.querySelector('.loader'),\n  gallery: document.querySelector('.gallery'),\n  searchForm: document.querySelector('.search-form'),\n};\n\nrefs.searchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const query = form.elements.query.value;\n  refs.gallery.innerHTML = '';\n\n  showLoader();\n\n  fetchImage(query)\n    .then(renderImage)\n    .catch(onFetchError)\n    .finally(() => {\n      hideLoader();\n      form.reset();\n    });\n}\n\nfunction renderImage({ hits }) {\n  if (hits.length === 0) {\n    onFetchError(\n      null,\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    return;\n  }\n\n  const markup = hits\n    .map(\n      ({\n        comments,\n        downloads,\n        largeImageURL,\n        likes,\n        webformatURL,\n        tags,\n        views,\n      }) =>\n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n          <ul class=\"gallery-item-description\">\n            <li>Likes: ${likes}</li>\n            <li>Views: ${views}</li>\n            <li>Downloads: ${downloads}</li>\n            <li>Comments: ${comments}</li>\n          </ul>\n        </a>\n      </li>`\n    )\n    .join('');\n\n  refs.gallery.innerHTML = markup;\n\n  if (gallery === null) {\n    gallery = new SimpleLightbox('.gallery-item a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    gallery.refresh();\n  }\n}\n\nfunction onFetchError(error, customMessage = '') {\n  const errorMessage =\n    customMessage || 'Sorry, there was an error fetching images.';\n  iziToast.show({\n    class: 'error-svg',\n    theme: 'dark',\n    message: errorMessage,\n    messageSize: '16px',\n    messageColor: 'white',\n    backgroundColor: '#EF4040',\n    position: 'topRight',\n    timeout: 5000,\n  });\n}\n\n// Додаємо обробник події для поле вводу\nconst searchInput = refs.searchForm.querySelector('.form-control');\nsearchInput.addEventListener('focus', () => {\n  // Очищаємо вміст галереї, коли курсор фокусується на полі вводу\n  refs.gallery.innerHTML = '';\n});\n\nfunction hideLoader() {\n  // Приховати елемент завантажувача\n  setTimeout(() => {\n    refs.loader.style.display = 'none';\n  }, 500);\n}\n\nfunction showLoader() {\n  // Показати елемент завантажувача\n  if (refs.loader.style.display !== 'block') {\n    refs.loader.style.display = 'block';\n  }\n}\n"],"names":["BASE_URL","API_KEY","fetchImage","qWorld","image_type","orientation","safesearch","resp","gallery","refs","handleSearch","event","form","query","showLoader","renderImage","onFetchError","hideLoader","hits","markup","comments","downloads","largeImageURL","likes","webformatURL","tags","views","error","customMessage","errorMessage","iziToast","searchInput"],"mappings":"svBAKA,MAAMA,EAAW,0BACXC,EAAU,qCAEhB,SAASC,EACPC,EACAC,EAAa,QACbC,EAAc,aACdC,EAAa,GACb,CACA,OAAO,MACL,GAAGN,UAAiBC,OAAaE,gBAAqBC,iBAA0BC,gBAA0BC,eAC9G,EAAI,KAAKC,GAAQ,CACb,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAGjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,IAAIC,EAEJ,MAAMC,EAAO,CACX,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,UAAU,EAC1C,WAAY,SAAS,cAAc,cAAc,CACnD,EAEAA,EAAK,WAAW,iBAAiB,SAAUC,CAAY,EAEvD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAOD,EAAM,cACbE,EAAQD,EAAK,SAAS,MAAM,MAClCH,EAAK,QAAQ,UAAY,GAEzBK,IAEAZ,EAAWW,CAAK,EACb,KAAKE,CAAW,EAChB,MAAMC,CAAY,EAClB,QAAQ,IAAM,CACbC,IACAL,EAAK,MAAK,CAChB,CAAK,CACL,CAEA,SAASG,EAAY,CAAE,KAAAG,GAAQ,CAC7B,GAAIA,EAAK,SAAW,EAAG,CACrBF,EACE,KACA,0EACN,EACI,MACD,CAED,MAAMG,EAASD,EACZ,IACC,CAAC,CACC,SAAAE,EACA,UAAAC,EACA,cAAAC,EACA,MAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,CACD,IACC;AAAA,wCACgCJ;AAAA,4CACIE,WAAsBC;AAAA;AAAA,yBAEzCF;AAAA,yBACAG;AAAA,6BACIL;AAAA,4BACDD;AAAA;AAAA;AAAA,YAIvB,EACA,KAAK,EAAE,EAEVX,EAAK,QAAQ,UAAYU,EAQvBX,EAAQ,QAAO,CAEnB,CAEA,SAASQ,EAAaW,EAAOC,EAAgB,GAAI,CAC/C,MAAMC,EACJD,GAAiB,6CACnBE,EAAS,KAAK,CACZ,MAAO,YACP,MAAO,OACP,QAASD,EACT,YAAa,OACb,aAAc,QACd,gBAAiB,UACjB,SAAU,WACV,QAAS,GACb,CAAG,CACH,CAGA,MAAME,EAActB,EAAK,WAAW,cAAc,eAAe,EACjEsB,EAAY,iBAAiB,QAAS,IAAM,CAE1CtB,EAAK,QAAQ,UAAY,EAC3B,CAAC,EAED,SAASQ,GAAa,CAEpB,WAAW,IAAM,CACfR,EAAK,OAAO,MAAM,QAAU,MAC7B,EAAE,GAAG,CACR,CAEA,SAASK,GAAa,CAEhBL,EAAK,OAAO,MAAM,UAAY,UAChCA,EAAK,OAAO,MAAM,QAAU,QAEhC"}